<!doctype html>
<html lang="en" class="bg-gray-50 dark:bg-gray-900">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kairos Factory</title>
    <link rel="stylesheet" href="/output.css" />
    <script defer src="./bundle.js"></script>
  </head>
  <body>
    <!-- Banner -->
    <div id="sticky-banner" tabindex="-1" class="w-full p-4 border-b border-red-200 bg-red-50 dark:bg-gray-800 dark:border-red-800">
      <div class="flex items-center max-w-screen-xl mx-auto">
        <p class="flex items-center text-sm font-normal text-gray-500 dark:text-red-400">
          <span class="inline-flex p-1 me-3 bg-red-200 rounded-full dark:bg-gray-600 w-6 h-6 items-center justify-center shrink-0">
            <svg class="w-3 h-3 text-red-500 dark:text-red-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 19">
              <path d="M15 1.943v12.114a1 1 0 0 1-1.581.814L8 11V5l5.419-3.871A1 1 0 0 1 15 1.943ZM7 4H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2v5a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2V4ZM4 17v-5h1v5H4ZM16 5.183v5.634a2.984 2.984 0 0 0 0-5.634Z"/>
            </svg>
            <span class="sr-only">Light bulb</span>
          </span>
          <span>This feature is still in heavy development. You can expect changes on its UI or functionality without notice. You can track the progress or give feedback on
            <a href="https://github.com/kairos-io/kairos/issues/3244" class="inline font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline">this ticket</a>
          </span>
        </p>
      </div>
    </div>



    <!-- Main Content -->
    <section class="py-8 px-4 mx-auto max-w-screen-xl lg:py-16" x-data="mergedComponents()">
      <div class="grid lg:grid-cols-3 gap-8 lg:gap-16">
        <!-- Left Column - Header -->
        <div class="lg:col-span-1">
          <div class="sticky top-24">
            <div class="flex items-center mb-6 text-gray-500 dark:text-gray-400">
              <!-- Kairos Logo SVG -->
              <svg class="w-15 h-15 mr-2 text" width="137" height="137" viewBox="0 0 137 137" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="24.8171" height="24.8171" transform="matrix(-0.86601 0.500028 -3.18907e-05 1 68.502 18.8594)" fill="#ee5007"></rect>
                <rect width="24.8171" height="24.8171" transform="matrix(-0.86601 -0.500028 3.18907e-05 1 47.0088 31.2695)" fill="#ff7442"></rect>
                <rect width="24.8171" height="24.8171" transform="matrix(-0.866041 0.499972 0.866041 0.499972 47.0088 6.45312)" fill="#fb9e70"></rect>
                <rect width="24.8171" height="24.8171" transform="matrix(3.19859e-05 1 0.86601 0.500028 25.5139 43.6797)" fill="#ff7442"></rect>
                <rect width="24.8171" height="24.8171" transform="matrix(-0.866041 0.499973 0.866041 0.499972 25.5139 68.4922)" fill="#fb9e70"></rect>
                <rect width="24.8171" height="24.8171" transform="matrix(-3.17834e-05 1 0.866009 -0.500028 4.02271 56.0898)" fill="#ee5007"></rect>
                <rect width="24.8171" height="24.8171" transform="matrix(-0.86601 0.500028 -3.19781e-05 1 68.5042 93.3125)" fill="#ee5007"></rect>
                <rect width="24.8171" height="24.8171" transform="matrix(-0.866009 -0.500028 3.18033e-05 1 47.011 105.723)" fill="#ff7442"></rect>
                <rect width="24.8171" height="24.8171" transform="matrix(-0.866041 0.499972 0.866041 0.499973 47.011 80.9062)" fill="#fb9e70"></rect>
                <rect width="24.8171" height="24.8171" transform="matrix(0.86601 -0.500028 3.18907e-05 -1 68.4985 118.141)" fill="#ee5007"></rect>
                <rect width="24.8171" height="24.8171" transform="matrix(0.86601 0.500028 -3.18907e-05 -1 89.9917 105.73)" fill="#ff7442"></rect>
                <rect width="24.8171" height="24.8171" transform="matrix(0.866041 -0.499972 -0.866041 -0.499972 89.9917 130.547)" fill="#fb9e70"></rect>
                <rect width="24.8171" height="24.8171" transform="matrix(-0.86601 0.500028 -3.19781e-05 1 132.979 56.0859)" fill="#ee5007"></rect>
                <rect width="24.8171" height="24.8171" transform="matrix(-0.866009 -0.500028 3.18033e-05 1 111.486 68.4961)" fill="#ff7442"></rect>
                <rect width="24.8171" height="24.8171" transform="matrix(-0.866041 0.499972 0.866041 0.499973 111.486 43.6797)" fill="#fb9e70"></rect>
                <rect width="24.8171" height="24.8171" transform="matrix(0.86601 -0.500028 3.18907e-05 -1 68.5002 43.6875)" fill="#ee5007"></rect>
                <rect width="24.8171" height="24.8171" transform="matrix(0.86601 0.500028 -3.18907e-05 -1 89.9934 31.2773)" fill="#ff7442"></rect>
                <rect width="24.8171" height="24.8171" transform="matrix(0.866041 -0.499972 -0.866041 -0.499972 89.9934 56.0938)" fill="#fb9e70"></rect>
              </svg>
            </div>
            <h1 class="items-center mb-4 text-4xl font-extrabold tracking-tight leading-none text-gray-900 md:text-5xl lg:text-6xl dark:text-white">
              Kairos Factory
            </h1>
            <p class="mb-6 text-lg font-normal text-gray-500 lg:text-xl dark:text-gray-400">
              The easiest way to generate immutable operating systems with all the bells and whistles for your project.
            </p>
            <a href="https://kairos.io" target="_blank" class="text-blue-600 dark:text-blue-500 hover:underline font-medium text-lg inline-flex items-center">
              Learn more in the documentation
              <svg class="w-3.5 h-3.5 ms-2 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9"/>
              </svg>
            </a>
          </div>
        </div>

        <!-- Right Column - Tabbed Content -->
        <div class="lg:col-span-2">
          <div class="w-full p-6 space-y-8 bg-white rounded-lg shadow-xl dark:bg-gray-800">
            
            <!-- Tab Navigation -->
            <div class="border-b border-gray-200 dark:border-gray-600">
              <nav class="flex space-x-8" aria-label="Tabs">
                <button 
                  @click="switchToTab('newbuild')"
                  :class="[mainActiveTab === 'newbuild' ? 'border-blue-500 text-blue-600 dark:text-blue-400' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300', 'whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm']"
                >
                  New Build
                </button>
                <button 
                  @click="switchToTab('builds')"
                  :class="[mainActiveTab === 'builds' ? 'border-blue-500 text-blue-600 dark:text-blue-400' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300', 'whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm']"
                >
                  Builds
                </button>
              </nav>
            </div>

            <!-- Tab Content -->
            <div class="min-h-96">
              
              <!-- New Build Tab -->
              <div x-show="mainActiveTab === 'newbuild'" class="space-y-6">
            <p class="text-gray-600 dark:text-gray-300 mb-6">
              Choose your desired configuration options below by selecting from each category. Once you've made your selections, click the "Build" button at the bottom to generate your custom Kairos image. The build process will create both an ISO and a raw disk image for your chosen configuration.
            </p>

            <!-- Form -->
                <form @submit="handleFormSubmit" class="mt-8 space-y-6" action="#" novalidate>
              
              <!-- Alpine.js Accordion -->
              <div id="accordion-collapse">
                
                <!-- Dynamic Section Rendering -->
                <template x-for="(section, index) in sections.filter(s => s.visible)" :key="section.id">
                  <div class="accordion-section">
                  
                  <!-- Section Header -->
                  <h2 :id="'accordion-heading-' + section.id">
                  <button
                    type="button"
                      @click="toggleSection(section.id)"
                    :class="'flex items-center justify-between w-full p-5 font-medium text-gray-500 border border-b border-gray-200 mb-0 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-800 dark:border-gray-700 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 gap-3 aria-expanded:true:border-b-0' + (index === 0 ? ' rounded-t-lg' : '') + (index === sections.filter(s => s.visible).length - 1 ? ' rounded-b-lg' : '')"
                      :aria-expanded="isSectionOpen(section.id)"
                      :aria-controls="'accordion-body-' + section.id"
                  >
                      <!-- Left side: Title + Info Button -->
                      <div class="flex items-center gap-2">
                        <span x-text="section.title"></span>
                        
                        <!-- Info Popover Button -->
                        <template x-if="section.infoPopover">
                          <div x-data="{ showPopover: false }" class="relative">
                            <button 
                              type="button" 
                              @mouseenter="showPopover = true" 
                              @mouseleave="showPopover = false"
                              @focus="showPopover = true"
                              @blur="showPopover = false"
                              class="text-gray-400 hover:text-gray-500 focus:outline-none focus:text-gray-600"
                            >
                              <svg class="w-4 h-4" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path>
                              </svg>
                              <span class="sr-only">Show information</span>
                            </button>
                            <!-- Alpine.js Popover -->
                            <div 
                              x-show="showPopover"
                              x-transition:enter="transition ease-out duration-200"
                              x-transition:enter-start="opacity-0 translate-y-1"
                              x-transition:enter-end="opacity-100 translate-y-0"
                              x-transition:leave="transition ease-in duration-150"
                              x-transition:leave-start="opacity-100 translate-y-0"
                              x-transition:leave-end="opacity-0 translate-y-1"
                              class="absolute left-0 top-full mt-2 w-72 p-3 bg-white border border-gray-200 rounded-lg shadow-lg z-50 dark:bg-gray-800 dark:border-gray-600"
                              @mouseenter="showPopover = true"
                              @mouseleave="showPopover = false"
                            >
                              <h3 class="font-semibold text-gray-900 dark:text-white mb-2" x-text="section.infoPopover?.title"></h3>
                              <div class="text-sm text-gray-500 dark:text-gray-400 mb-2" x-html="section.infoPopover?.content"></div>
                              <a x-show="section.infoPopover?.link" 
                                 :href="section.infoPopover?.link?.url || '#'"
                                 target="_blank"
                                 class="inline-flex items-center font-medium text-blue-600 dark:text-blue-500 hover:text-blue-700 hover:underline text-sm"
                                 x-text="section.infoPopover?.link?.text">
                              </a>
                              <!-- Arrow -->
                              <div class="absolute -top-1 left-6 w-2 h-2 bg-white dark:bg-gray-800 border-l border-t border-gray-200 dark:border-gray-600 rotate-45"></div>
                            </div>
                          </div>
                        </template>
                      </div>
                      
                    <span class="flex items-center gap-2">
                        <!-- Multiple Icons Display (for artifacts) -->
                        <template x-if="section.getSelectedIcons">
                          <span class="text-gray-900 dark:text-white flex gap-2">
                            <template x-for="iconSrc in getSelectedIcons(section)" :key="iconSrc">
                              <img :src="iconSrc" class="w-7 h-7" />
                            </template>
                          </span>
                        </template>

                        <!-- Single Icon Display (for other sections) -->
                        <template x-if="!section.getSelectedIcons">
                          <span x-show="getSelectedIcon(section)" class="text-gray-900 dark:text-white">
                            <img :src="getSelectedIcon(section)" class="w-7 h-7" />
                          </span>
                        </template>
                        
                        <!-- Selected Value Display -->
                        <span class="text-gray-900 dark:text-white" x-text="getSelectedValue(section)"></span>
                        
                        <!-- Accordion Arrow -->
                      <svg 
                        class="w-3 h-3"
                          :class="{ 'rotate-180': isSectionOpen(section.id) }"
                        fill="none" 
                        stroke="currentColor" 
                        viewBox="0 0 10 6"
                      >
                          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
                      </svg>
                    </span>
                  </button>
                </h2>

                  <!-- Section Body -->
                  <div 
                    :id="'accordion-body-' + section.id"
                    x-show="isSectionOpen(section.id)"
                    class="p-5 border border-b-0 border-gray-200 dark:border-gray-700 dark:bg-gray-900 mt-0"
                    :aria-labelledby="'accordion-heading-' + section.id"
                  >
                    
                    <!-- Radio Grid Type -->
                    <template x-if="section.type === 'radio-grid'">
                      <ul :class="'grid w-full gap-3 ' + section.gridCols">
                        <template x-for="item in getSectionData(section)" :key="item.value">
                      <li>
                        <input
                          type="radio"
                              :name="section.formField"
                              :id="'option-' + item.value"
                              :value="item.value"
                              x-model="formData[section.formField]"
                              x-ref="kubernetesFields"
                          class="hidden peer"
                              :required="section.required"
                        />
                        <label
                              :for="'option-' + item.value"
                          class="inline-flex items-center justify-between w-full p-3 text-gray-500 bg-white border-2 border-gray-200 rounded-lg cursor-pointer dark:hover:text-gray-300 dark:border-gray-700 peer-checked:border-blue-600 dark:peer-checked:border-blue-600 hover:text-gray-600 dark:peer-checked:text-gray-300 peer-checked:text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700"
                        >
                              <div class="flex items-center gap-3">
                                <!-- Icon -->
                                <img x-show="section.showIcon && item.icon" :src="item.icon" class="w-7 h-7 text-sky-500 flex-shrink-0" />
                                
                                <!-- Custom Icons for Models would go here if needed -->
                                
                                <div class="flex-1">
                                  <!-- Label -->
                                  <div class="w-full text-base font-semibold leading-tight" x-text="item.label"></div>
                                  
                                  <!-- Description -->
                                  <div x-show="section.showDescription" class="w-full text-sm leading-tight" x-text="item.description"></div>
                                </div>
                          </div>
                        </label>
                      </li>
                    </template> 
                        

                  </ul>
                    </template>
                    
                    <!-- Text Input with Helper Buttons Type -->
                    <template x-if="section.type === 'text-input-with-buttons'">
                      <div>
                        <div x-show="section.description" class="w-full mb-3 text-sm text-gray-600 dark:text-gray-400" x-text="section.description">
                        </div>
                        <input
                          type="text"
                          :name="section.formField"
                          :id="section.formField"
                          x-model="formData[section.formField]"
                          x-ref="baseImageField"
                          :class="'bg-gray-50 border text-gray-900 text-sm rounded-lg block w-full p-2.5 mb-4 dark:bg-gray-700 dark:placeholder-gray-400 dark:text-white ' + (hasValidationError(section.formField) ? 'border-red-500 focus:ring-red-500 focus:border-red-500 dark:border-red-500 dark:focus:ring-red-500 dark:focus:border-red-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:border-gray-600 dark:focus:ring-blue-500 dark:focus:border-blue-500')"
                          :placeholder="section.placeholder"
                          :required="section.required"
                        />
                        <template x-if="hasValidationError(section.formField)">
                          <p class="mt-2 text-sm text-red-600 dark:text-red-500" x-text="getValidationErrorMessage(section.formField)">
                          </p>
                        </template>
                        
                        <!-- Helper Buttons Grid -->
                        <ul :class="'grid w-full gap-3 ' + section.gridCols">
                          <template x-for="item in getSectionData(section)" :key="item.value">
                            <li>
                              <button
                                type="button"
                                @click="formData[section.formField] = item.value; clearValidationErrors();"
                                :class="'inline-flex items-center justify-between w-full p-3 text-gray-500 bg-white border-2 rounded-lg hover:text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:bg-gray-800 dark:hover:bg-gray-700 ' + (formData[section.formField] === item.value ? 'border-blue-600 dark:border-blue-600' : 'border-gray-200 dark:border-gray-700')"
                              >
                                <div class="flex items-center gap-3">
                                  <!-- Icon -->
                                  <img x-show="section.showIcon && item.icon" :src="item.icon" class="w-7 h-7 text-sky-500 flex-shrink-0" />
                                  
                                  <div class="flex-1">
                                    <!-- Label -->
                                    <div class="w-full text-base font-semibold leading-tight" x-text="item.label"></div>
                                    
                                    <!-- Description -->
                                    <div x-show="section.showDescription" class="w-full text-sm leading-tight" x-text="item.description"></div>
                                  </div>
                                </div>
                              </button>
                            </li>
                          </template>
                        </ul>
                      </div>
                    </template>
                    
                    <!-- Text Input Type -->
                    <template x-if="section.type === 'text-input'">
                      <div>
                        <div x-show="section.description" class="w-full mb-3 text-sm text-gray-600 dark:text-gray-400" x-text="section.description">
                        </div>
                        <input
                          type="text"
                          :name="section.formField"
                          :id="section.formField"
                          x-model="formData[section.formField]"
                          x-ref="versionField"
                          :class="'bg-gray-50 border text-gray-900 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-700 dark:placeholder-gray-400 dark:text-white ' + (hasValidationError(section.formField) ? 'border-red-500 focus:ring-red-500 focus:border-red-500 dark:border-red-500 dark:focus:ring-red-500 dark:focus:border-red-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:border-gray-600 dark:focus:ring-blue-500 dark:focus:border-blue-500')"
                          :placeholder="section.placeholder"
                          :required="section.required"
                        />
                        <template x-if="hasValidationError(section.formField)">
                          <p class="mt-2 text-sm text-red-600 dark:text-red-500" x-text="getValidationErrorMessage(section.formField)">
                          </p>
                        </template>
                      </div>
                    </template>
                    
                    <!-- Textarea Type -->
                    <template x-if="section.type === 'textarea'">
                      <div>
                        <div x-show="section.description" class="w-full mb-3 text-sm text-gray-600 dark:text-gray-400" x-text="section.description">
                        </div>
                        <textarea
                          :id="section.formField"
                          :name="section.formField"
                          x-model="formData[section.formField]"
                          :rows="section.rows"
                          class="font-mono w-full p-4 rounded-lg bg-gray-900 text-green-400 border border-gray-700 focus:ring-blue-500 focus:border-blue-500 resize-vertical shadow-inner"
                          :placeholder="section.placeholder"
                          spellcheck="false"
                          autocomplete="off"
                        ></textarea>
                  </div>
                    </template>
                    

                    <!-- Checkbox Grid Type -->
                    <template x-if="section.type === 'checkbox-grid'">
                      <ul :class="'grid w-full gap-6 ' + section.gridCols">
                        <template x-for="item in getSectionData(section)" :key="item.value">
                      <li>
                        <input
                              type="checkbox" 
                              :id="'artifact-' + item.value" 
                              :name="section.formField + item.value" 
                              x-model="formData[section.formField + item.value]"
                              :disabled="item.alwaysSelected === true"
                              @change="clearValidationErrors()"
                          class="hidden peer"
                        />
                        <label
                              :for="'artifact-' + item.value" 
                              :class="'flex flex-col items-start justify-between w-full h-full p-6 text-gray-500 bg-white border-2 border-gray-200 rounded-lg ' + (item.alwaysSelected === true ? 'cursor-not-allowed' : 'cursor-pointer') + ' dark:border-gray-700 peer-checked:border-blue-600 dark:peer-checked:border-blue-600 dark:text-gray-400 dark:bg-gray-800'"
                              @click="if (item.alwaysSelected === true) $event.preventDefault()"
                            >
                              <div class="flex items-center gap-3 h-full">
                                <img x-show="section.showIcon && item.icon" :src="item.icon" class="w-7 h-7 flex-shrink-0" />
                                <div class="flex-1">
                                  <div class="w-full text-base font-bold mb-2 leading-tight" x-text="item.label"></div>
                                  <div x-show="section.showDescription" class="w-full text-sm leading-tight" x-text="item.description"></div>
                                </div>
                        </div>
                      </label>
                    </li>
                    </template>
                  </ul>
                    </template>
                    
                  </div>

                  </div>
                </template>
                
                  </div>

              <!-- Build Button -->
                  <button
                id="submit-button"
                type="submit"
                class="w-full px-5 py-3 text-base font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 sm:w-auto dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
              >
                Build
                  </button>
                </form>
              </div>

              <!-- Builds Tab -->
              <div x-show="mainActiveTab === 'builds'" class="space-y-4">
                <!-- Header with filters -->
                <div class="flex items-center justify-between">
                  <h2 class="text-xl font-bold text-gray-900 dark:text-gray-100">Build History</h2>
                  <button 
                    @click="refreshBuilds()"
                    class="inline-flex items-center px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:text-white dark:focus:ring-gray-700"
                  >
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                    </svg>
                    Refresh
                  </button>
                </div>
                
                <!-- Filter Controls -->
                <div class="flex space-x-4">
                  <select 
                    x-model="statusFilter" 
                    @change="updateURLAndRefresh()"
                    class="block w-48 p-2 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                  >
                    <option value="">All Status</option>
                    <option value="queued">Queued</option>
                    <option value="assigned">Assigned</option>
                    <option value="running">Running</option>
                    <option value="complete">Complete</option>
                    <option value="failed">Failed</option>
                  </select>
                </div>

                <!-- Loading State -->
                <template x-if="loading">
                  <div class="flex items-center justify-center h-32">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
                  </div>
                </template>

                <!-- Empty State -->
                <template x-if="!loading && builds.length === 0">
                  <div class="flex flex-col items-center justify-center h-32 text-gray-500 dark:text-gray-400">
                    <svg class="w-12 h-12 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    <p class="text-lg font-medium">No builds found</p>
                    <p class="text-sm">Start by creating a new build</p>
                  </div>
                </template>

                <!-- Builds Grid -->
                <template x-if="!loading && builds.length > 0">
                  <div class="space-y-3">
                    <template x-for="build in builds" :key="build.uuid">
                      <div 
                        @click="selectBuildWithUrl(build)"
                        class="p-4 border border-gray-200 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors bg-white dark:bg-gray-800 shadow-sm hover:shadow-md"
                      >
                        <div class="flex items-center justify-between">
                          <div class="flex items-center space-x-3">
                            <!-- Status indicator -->
                            <div 
                              :class="getStatusIndicatorClass(build.status)"
                              class="w-3 h-3 rounded-full"
                            ></div>
                            
                            <!-- Build info -->
                            <div>
                              <p class="text-sm font-medium text-gray-900 dark:text-gray-100" x-text="getBuildTitle(build)"></p>
                              <p class="text-xs text-gray-600 dark:text-gray-300">
                                <span x-text="build.image"></span> • <span x-text="formatTime(build.created_at)"></span>
                              </p>
                            </div>
                          </div>
                          
                          <!-- Status badge -->
                          <span 
                            :class="getStatusBadgeClass(build)"
                            x-text="build.status"
                          ></span>
                        </div>

                      </div>
                    </template>
                  </div>
                </template>
              </div>

            </div>
          </div>
        </div>
      </div>

      <!-- Build Details Modal - Simple Alpine.js binding -->
      <template x-if="modal.isVisible">
        <div class="fixed inset-0 z-50 overflow-y-auto" @keydown.escape="closeModal()" tabindex="-1" x-init="$el.focus()">
          <!-- Backdrop -->
          <div 
            class="fixed inset-0 bg-black/75"
            @click="closeModal()"
          ></div>
          
          <!-- Modal container -->
          <div class="relative min-h-screen flex items-center justify-center p-4">
            <div 
              class="relative bg-white rounded-lg shadow-xl dark:bg-gray-800 max-w-4xl w-full max-h-[90vh] overflow-hidden"
              @click.stop
            >
              <!-- Header -->
              <div class="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700">
                <div>
                  <h3 class="text-xl font-semibold text-gray-900 dark:text-white" 
                      x-text="modal.build ? getBuildTitle(modal.build) : 'Loading...'"></h3>
                  <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                    <span x-text="modal.build?.status || ''"></span>
                    <span x-show="modal.build?.status"> • </span>
                    <span x-text="modal.build ? formatTime(modal.build.created_at) : ''"></span>
                  </p>
                </div>
                
                <!-- Close button -->
                <button
                  @click="closeModal()"
                  type="button"
                  class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"
                >
                  <svg class="w-3 h-3" fill="none" viewBox="0 0 14 14">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                  </svg>
                </button>
              </div>
              
              <!-- Body -->
              <div class="p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-140px)]">
                
                <!-- Build Summary -->
                <div x-show="modal.build" class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                  <h4 class="text-lg font-medium text-gray-900 dark:text-white mb-3">Build Configuration</h4>
                  <div class="grid grid-cols-2 gap-4">
                    <template x-for="[key, value] in Object.entries(getBuildSummary(modal.build))" :key="key">
                      <div>
                        <dt class="text-sm font-medium text-gray-500 dark:text-gray-400" x-text="key"></dt>
                        <dd class="text-sm text-gray-900 dark:text-white" x-text="value"></dd>
                      </div>
                    </template>
                  </div>
                </div>

                <!-- Download Links -->
                <div x-show="modal.artifacts?.length > 0" class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                  <h4 class="text-lg font-medium text-gray-900 dark:text-white mb-3">Downloads</h4>
                  <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                    <template x-for="artifact in modal.artifacts" :key="artifact.url">
                      <a 
                        :href="`/builds/${modal.build.uuid}/artifacts/${artifact.url}`"
                        class="inline-flex items-center px-4 py-2 text-sm font-medium text-center text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300"
                      >
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        <span x-text="artifact.name"></span>
                      </a>
                    </template>
                  </div>
                </div>

                <!-- Build Logs -->
                <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                  <div class="flex items-center justify-between mb-3">
                    <h4 class="text-lg font-medium text-gray-900 dark:text-white">Build Logs</h4>
                    <label class="inline-flex items-center cursor-pointer">
                      <input
                        type="checkbox"
                        x-model="modal.showLogs"
                        class="sr-only peer"
                      />
                      <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-400 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-600"></div>
                      <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300">Show Logs</span>
                    </label>
                  </div>
                  
                  <div
                    x-show="modal.showLogs"
                    x-transition
                    class="bg-gray-900 text-green-400 p-4 rounded-lg h-80 overflow-y-auto font-mono text-sm whitespace-pre-wrap"
                    x-ref="modalLogsContainer"
                    x-effect="if (modal.logs) scrollLogsToBottom()"
                  >
                    <div x-show="modal.isStreamingLogs" class="flex items-center text-blue-400 mb-2">
                      <svg class="animate-spin -ml-1 mr-2 h-4 w-4" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                      </svg>
                      Streaming live logs...
                    </div>
                    <div x-text="modal.logs || 'No logs available'"></div>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>
      </template>
    </section>
  </body>
</html>
